---
title: Django学习小记-5-模板
categories:
  - Django
tags:
  - Python
  - backend
  - Django
abbrlink: 5cea99f3
date: 2021-08-21 16:19:31
---



> Django提供了模板系统将模板（HTML）与服务（Python）分
>
> 开，降低了项目开发和维护的成本。

## 一、模板配置

Django模板系统默认支持DTL和Jinja2模板后端，当然也可以配置其他第三方的模板引擎。DTL是内置于Django框架中的，也是官方极力推荐使用的模板后端。

Django在创建项目的时候，默认定义的TEMPLATES在项目的settings.py文件中

![img](https://gitee.com/cao_ziqiang/img/raw/master/20210826163016.jpeg)

BACKEND：指定了要使用的模板引擎类的Python路径；

DIRS：一个目录列表，指定模板文件的存放路径；

APP_DIRS：一个布尔值，为True时，模板引擎会在已安装应用的templates子目录中查找模板；

OPTIONS：指定额外的选项，不同的模板引擎有着不同的可选额外参数；

## 二、模板语法

模板语言的语法包括了四个部分：变量、标签、过滤器和注释。

### 2.1 变量与替换规则

<hr/>

模板引擎通过上下文字典中提供的值完成替换，如

`{{project}}`，这类似dict中key到value的映射。

（1）字典查询：如`{{a.b}}`查询a['b']。

（2）属性查询：如`{{a.b}}`查询a.b。

（3）方法调用：如`{{a.b}}`调用a.b()。

（4）数字索引查询：如`{{a.1}}`查询a[1]。

### 2.2 模板标签

标签的解释是在渲染的过程中提供任意的逻辑，它看起来像`{%tag%}`这样。标签常常用于在输出时创建文本、控制循环和判断逻辑以及装载外部信息。

1.判断执行逻辑的if标签。

if标签判断条件是否成立，如果成立则显示块中的内容。if需要与endif成对出现，且它与Python中的if、elif和else用法是类似的。

2.迭代序列元素的for标签。

for标签用于对列表或元组中的元素进行迭代，它与Python中的for语法是类似的。同时，它需要与结束标签endfor配合使用。for标签支持一个可选的empty子句，用于定义当列表不存在或没有元素时显示的内容。

3.获取视图访问地址的url标签

使用url标签可以避免在模板中对访问地址进行硬编码，即使是将来修改了视图的访问地址，也可以不用修改模板定义。

<pre>
</pre>

```django
{% url ns:name arg1, arg2... %}
```

其中，ns是视图的命名空间，name是视图的名称。如果需要，还可以给定参数构造动态的url。

4.用于多行注释的comment标签

在模板中注释内容需要使用{##}，如{#Django BBS#}，引擎不会对注释的内容进行解释。

5.判断变量相等或不相等的标签

ifequal和ifnotequal标签，用于判断变量是否相等。

6.简单标签

这类标签通过接收参数，对输入的参数做一些处理并返回结果。

7.引入标签

这类标签可以被其他模板进行渲染，然后将渲染结果输出。

8.赋值标签

它与简单标签非常相似，但是结果不被直接输出，而是存储在指定的上下文变量中，目的是降低传递上下文的成本。

### 2.3 过滤器

过滤器用于在显示变量之前对变量的值进行调整。可以认为过滤器就是一个Python函数，传递参数给它，处理完之后返回到模板中。

### 2.4 模板继承

要定义好被继承的父模板，其中包含通用元素和可以被子模板覆盖的block部分即可。

