---
title: Django学习小记-7-路由
categories: [Django]
tags:
  - Python
  - backend
  - Django
date: 2021-08-25 16:54:04
---

>路由系统最本质的目的就是建立请求URL与视图函数（类）之间的映射关系。

## 一、URLconf

URLconf是一套模式，它在Django项目中定义了URL与视图函数之间的映射表，实现了将不同的URL分发给不同的视图处理函数。

urlpatterns是一个列表，列表中定义的元素被称为URL模式，每一个模式定义了一个URL的基本格式。且URL模式实现了两类绑定。

第一类，URL与视图函数的绑定，即URL关联到处理方法。

第二类，URL与URLconf的绑定，实现路由分发。

## 二、相关函数

### 2.1 path

path函数用于定义URL模式。

route：必填参数，是包含URL模式的字符串或gettext_lazy函数（实现对字符串的惰性存储，在真正被用到时才会去翻译）的返回值。

view：必填参数，可以传递两种类型。第一种是视图函数或基于类的视图的as_view方法的结果，这一类参数在Python中称为可调用对象；第二种是调用include函数的返回值，是一个元组对象。

kwargs：选填参数，需要是字典类型，用于给目标视图传递参数。

name：选填参数，用于给URL模式命名。通常在重定向和模板中被使用到，即使将来修改了route，也不需要修改引用的地方。

### 2.2 re_path

和path函数类似，同样用于定义URL模式。path用于定义常规的字符串路由，而re_path用来定义正则表达式路由。

### 2.3 include

用于将URLconf的完整Python路径引入另一个URLconf中。

### 2.4 register_converter

用于注册path函数中route参数用到的转换器。

converter：转换器类。

type_name：转换器名称，在route中被使用到。

## 三、路由传参

### 3.1 无参传递

最简单的情况是不需要传递参数，这通常是欢迎页或出错页的视图定义。其不需要任何处理逻辑，直接返回结果。

这类视图也被称为静态路由，即URL是固定不变的，且不需要在URL中传递参数.

### 3.2 URL模式

参数绑定在定义URL模式（path或re_path函数）时可以指定kwargs，它以字典的形式定义，其中的每一个键值对将映射到视图的各个参数上去。

### 3.3 请求传参

这一类请求参数存储于HttpRequest对象中。

对于GET请求，参数位于URL的“？”后面，格式为键值对的形式，以“&”连接；

对于POST请求，通常是通过表单的形式给视图函数传递参数。

### 3.4 动态路由

这一类参数传递是从URL中捕获到的，它们也被称为动态路由，有两类实现方式：路径转换器和正则表达式。

路径转换器用在path函数中，定义的格式为：`<converter:name>`，其中converter标识转换器类，name是参数名。



