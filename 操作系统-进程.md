---
title: 操作系统-进程
date: 2021-03-25 11:09:54
categories: OS
tags: [计算机基础,backend]
---

## 一.操作系统的演进历史

### 发展阶段

![image-20210325111337541](https://gitee.com/cao_ziqiang/img/raw/master/image-20210325111337541.png)



### 多道程序设计

![image-20210325111556247](https://gitee.com/cao_ziqiang/img/raw/master/image-20210325111556247.png)

### 五大功能

- 进程管理
- 存储管理
- 作业管理
- 文件管理
- 设备管理

<hr/>

## 二.操作系统概览

### 什么是操作系统?

OS是管理计算机硬件和软件资源的<font color='red'>**计算机程序**</font>

管理配置内存,决定资源供需顺序,控制输入输出设备

操作系统提供让用户和系统交互的界面

### 基本功能

- OS统一管理着计算机的资源
- OS实现了对计算机资源的抽象,无需面向硬件接口直接编程
- OS提供了用户与计算机的接口

### 相关概念

- 并发性

并发与并行

并行是指两个或者多个事件可以在同一个时刻发生

并发是指两个或者多个事件可以在同一个时间间隔发生

- 共享性

共享性表现值OS中资源可以共享给多个并发的程序同时使用

多个程序可以同时使用主存中的存储空间

- 虚拟性

把一个物理实体表现为多个逻辑实体

主要包括时分复用技术和空分复用技术

- 异步性

在多道程序的环境下,允许多个程序并发的执行

进程在使用资源的时候,可能需要等待或者放弃

进程的执行并不是一个连续完成的过程,而是一个走走停停的过程,进程是一个不可预知的过程

<hr/>

## 三.进程

### 为什么需要进程

![image-20210325115145060](https://gitee.com/cao_ziqiang/img/raw/master/image-20210325115145060.png)

### ![image-20210325115227946](https://gitee.com/cao_ziqiang/img/raw/master/image-20210325115227946.png)进程的实体

在主存中,进程以一块连续的进程控制块形式存在

![image-20210325115316487](https://gitee.com/cao_ziqiang/img/raw/master/image-20210325115316487.png)



标识符:唯一标识一个进程,用于区别其他进程

状态:标记进程的运行状态,如:运行态,休眠态,阻塞态

程序计数器:进程即将被执行的下一条内存指令的地址

内存指针:程序代码,进程数据相关指针

上下文数据:进程执行时处理器存储的数据

I/O状态信息:被进程I/O操作所占用的文件列表

记账信息:进程使用CPU,时钟数总和

### 进程的状态

- 就绪状态

当进程被分配到除CPU以外的所有必要资源后,就处于就绪状态

只要再获得了CPU的使用权,就可以马上进入执行

其他资源都准备好,只差CPU资源的状态为就绪状态

在一个系统中多个处于就绪状态的进程通常排成一个队列,称为就绪队列

- 执行状态

进程获得CPU,称其处于执行状态

在单处理机中,在某个时刻只能有一个进程处于执行状态

- 阻塞状态

进程因为某种原因,如其他设备没有就绪而无法执行,从而放弃CPU的状态称为阻塞状态,阻塞队列

- 创建状态

创建进程时拥有PCB但其他资源还没有就绪的状态

- 终止状态

进程结束由系统清理或者归还PCB的状态称为终止状态

![image-20210325132707388](https://gitee.com/cao_ziqiang/img/raw/master/image-20210325132707388.png)

### 进程同步

根源问题在于:进程之间没有通信

解决对竞争资源存在多进程之间进行使用次序的协调

使得并发执行的多个进程之间可以有效的使用资源和相互利用

### 进程同步的原则

![image-20210325133235954](https://gitee.com/cao_ziqiang/img/raw/master/image-20210325133235954.png)

- 空闲让进: 资源无占用,允许使用
- 忙则等待: 资源有占用,请求进程进行等等
- 有限等待: 保证有限等待时间能够使用资源
- 让权等待: 等待时,进程需要让出CPU资源

### 进程的同步方法

- 消息队列
- 共享存储
- 信号量

### 线程的同步方法

- 互斥量
- 读写锁
- 自旋锁
- 条件变量

<hr/>

## 四.Linux进程管理

### 进程类型

- 前台进程

具有终端,可以和用户交互的进程

- 后台进程

与前台进程相对应,没有占用终端的进程就是后台进程,不和用户交互,优先级比前台进程低

在`linux`系统中,一般会以`'&'`符作为结束标记

- 守护进程

守护进程一般是特殊的后台进程,一般在系统引导时启动,一直运行到系统关闭

进程名字以`'d'`结尾的进程一般都是守护进程

### 进程的标记

进程的ID是进程的唯一标识符,每个进程有不同的ID

ID表现为一个非负的整数,由系统来决定最大值

操作系统提供了fork函数来创建进程

父子进程关系可以通过pstree命令来查看

![image-20210325134833925](https://gitee.com/cao_ziqiang/img/raw/master/image-20210325134833925.png)

###  linux进程命令

- ps命令

查询当前正在运行的进程

结合 -aux查看进程的详细信息

结合 -ef参数或者 grep命令检索线程

- top命令

- kill命令

kill -9 无条件终止进程

<hr/>