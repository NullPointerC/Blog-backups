---
title: Go语言学习-3-数据类型
categories:
  - Go
tags:
  - backend
  - Go
abbrlink: e64f4fa6
date: 2021-10-11 10:42:47
---

Go语言有很多种数据类型,基础数据类型包括整形,浮点型,布尔型,字符串等,还有数组,切片,结构体,函数,map,通道等其他类型。

## 基本数据类型

### 整型

整型可以分为有符号位和无符号为两种,按照长度又可以分为8,16,32,64等。

其中，`uint8`就是我们熟知的`byte`型，`int16`对应C语言中的`short`型，`int64`对应C语言中的`long`型。

|  类型  |                             描述                             |
| :----: | :----------------------------------------------------------: |
| uint8  |                  无符号 8位整型 (0 到 255)                   |
| uint16 |                 无符号 16位整型 (0 到 65535)                 |
| uint32 |              无符号 32位整型 (0 到 4294967295)               |
| uint64 |         无符号 64位整型 (0 到 18446744073709551615)          |
|  int8  |                 有符号 8位整型 (-128 到 127)                 |
| int16  |              有符号 16位整型 (-32768 到 32767)               |
| int32  |         有符号 32位整型 (-2147483648 到 2147483647)          |
| int64  | 有符号 64位整型 (-9223372036854775808 到 9223372036854775807) |

> 除此之外，还包括一些特殊整型

|  类型   |                          描述                          |
| :-----: | :----------------------------------------------------: |
|  uint   | 32位操作系统上就是`uint32`，64位操作系统上就是`uint64` |
|   int   |  32位操作系统上就是`int32`，64位操作系统上就是`int64`  |
| uintptr |              无符号整型，用于存放一个指针              |

以上由操作系统的平台来决定位数，不能确定是32位还是64位。

> 从Go1.13版本后引入了数字字面量的语法，为了便于以不同进制定义数字

```go
package main

import "fmt"

func main() {
	// 十进制
	var a = 10
	fmt.Printf("%d\n", a)
	fmt.Printf("%b\n", a)
	// 八进制
	b := 077
	fmt.Printf("%o\n", b)
	fmt.Printf("%d\n", b)
	// 十六进制
	c := 0xff
	fmt.Printf("%d\n", c)
	fmt.Printf("%x\n", c)
	// 二进制
	d := 0b1010101
	fmt.Printf("%d\n", d)
	fmt.Printf("%b\n", d)
}
```

如上述代码所示，可以使用`0b`，`0`，`0x`等不同前缀分别表示二进制，八进制和十六进制。

### 浮点型

Go语言支持两种浮点数：`float32`和`float64`。

这两种浮点数的区别在于精度不同，所以能够表达的最大范围也有所差异。分别是`math.MaxFloat32`和`math.MaxFloat64`。

### 复数

`complex64`和`complex128`。

前者的实部和虚部分别为32位，后者的实部和虚部为64位。

### 布尔值

Go语言以`bool`声明布尔类型，布尔类型只有`true`和`false`两个值。且布尔变量声明后默认其值为`false`。

### 字符串

Go语言中的字符串以原生类型出现，内部使用`UTF-8`编码，所以也可以像如`Java`语言直接在字符串中添加非`ASCII`码的字符。

#### 转义符

Go 语言的字符串常见转义符包含回车、换行、单双引号、制表符等，如下表所示。

| 转义符 |                含义                |
| :----: | :--------------------------------: |
|  `\r`  |         回车符（返回行首）         |
|  `\n`  | 换行符（直接跳到下一行的同列位置） |
|  `\t`  |               制表符               |
|  `\'`  |               单引号               |
|  `\"`  |               双引号               |
|  `\\`  |               反斜杠               |

#### 多行字符串

Go语言需要定义多行字符串时，可以使用反引号【`】字符：

```go
s1 := `第一行
第二行
第三行
`
fmt.Println(s1)
```

#### 常用方法

|                方法                 |      介绍      |
| :---------------------------------: | :------------: |
|              len(str)               |     求长度     |
|           +或fmt.Sprintf            |   拼接字符串   |
|            strings.Split            |      分割      |
|          strings.contains           |  判断是否包含  |
| strings.HasPrefix,strings.HasSuffix | 前缀/后缀判断  |
| strings.Index(),strings.LastIndex() | 子串出现的位置 |
| strings.Join(a[]string, sep string) |    join操作    |

### byte和rune

组成每个字符串的元素叫做“字符”，可以通过遍历或者单个获取字符串元素获得字符。 字符用单引号（’）包裹起来，如：

```go
var a = '中'
var b = 'x'
```

Go语言的字符有两种,一种是`uint8`类型,也称`byte`型,代表了`ASCII`码的一个字符。

还有一种就是`rune`类型,代表的是一个`UTF-8`字符。`rune`类型本质上还是一个`int32`类型。

当需要处理中文、日文或者其他复合字符时，则需要用到`rune`类型。

Go 使用了特殊的 rune 类型来处理 Unicode，让基于 Unicode 的文本处理更为方便，也可以使用 byte 型进行默认字符串处理，性能和扩展性都有照顾。

```go
s := "hello中国"
for i := 0; i < len(s); i++ {
    fmt.Printf("%v(%c) ", s[i], s[i])
}

fmt.Println()
for _, r := range s {
    fmt.Printf("%v(%c) ", r, r)
}
fmt.Println()
```

输出如下：

```bash
104(h) 101(e) 108(l) 108(l) 111(o) 228(ä) 184(¸) 173(­) 229(å) 155() 
104(h) 101(e) 108(l) 108(l) 111(o) 20013(中) 22269(国)
```

因为`UTF-8`编码下一个中文汉字由3~4个字节组成，所以我们不能简单的按照字节去遍历一个包含中文的字符串，否则就会出现上面输出中第一行的结果。

字符串底层是一个`byte`数组，所以可以和`[]byte`类型相互转换。字符串是不能修改的。

字符串是由byte字节组成，所以字符串的长度是`byte`字节的长度。 

`rune`类型用来表示`utf-8`字符，一个`rune`字符由一个或多个`byte`组成。

#### 修改字符串

要修改字符串，首先需要将其转化为`[]rune`或`[]byte`，完成后再将其转换为`string`。无论是哪种转换，都会重新分配内存，并复制字节数组。

```go
func changeString() {
	s1 := "big"
	// 强制类型转换
	byteS1 := []byte(s1)
	byteS1[0] = 'p'
	fmt.Println(string(byteS1))

	s2 := "白萝卜"
	runeS2 := []rune(s2)
	runeS2[0] = '红'
	fmt.Println(string(runeS2))
}
```

### 类型转换

Go语言中只有强制类型转换，没有隐式类型转换。该语法只能在两个类型之间支持相互转换的时候使用。

强制类型转换的基本语法如下：

```go
T(表达式)
```

其中，T表示要转换的类型。表达式包括变量、复杂算子和函数返回值等.

比如计算直角三角形的斜边长时使用math包的Sqrt()函数，该函数接收的是float64类型的参数，而变量a和b都是int类型的，这个时候就需要将a和b强制类型转换为float64类型。

```go
func sqrtDemo() {
	var a, b = 3, 4
	var c int
	// math.Sqrt()接收的参数是float64类型，需要强制转换
	c = int(math.Sqrt(float64(a*a + b*b)))
	fmt.Println(c)
}
```

