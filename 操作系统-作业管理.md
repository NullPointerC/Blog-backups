---
title: 操作系统-作业管理
categories: [OS]
tags:
  - 计算机基础
  - backend
date: 2021-03-25 15:50:02
---

## 一.进程调度

### 进程调度概述

计算机通过决策来决定哪个就绪进程可以优先获得CPU的使用权

- 非抢占式的调度

处理器一旦分配给某个进程,就让这个进程一直执行下去

调度程序不以任何原因抢占正在被使用的处理器

只有进程完成工作或因为IO阻塞才会让出处理器

- 抢占式的调度

允许调度程序以一定的策略暂停当前正在运行的进程

保存好旧进程的上下文信息,分配进程给新进程

### 进程调度算法

#### 先来先服务调度算法(FCFS)

- 根据进程的到达就绪队列的时间来优先服务

![image-20210330130620764](https://gitee.com/cao_ziqiang/img/raw/master/fAtH5zqMOekEcKh.png)

#### 短进程优先调度算法(SJF)

- 调度程序优先选择就绪队列中估计运行时间最短的进程优先执行

- 短进程优先调度算法不利于长作业进程的执行

#### 高优先权优先调度算法(PSA)

- 进程附带有优先权,调度程序优先选择优先权高的进程进入执行

- 高优先权优先调度算法使得紧迫的任务可以先得到执行

#### 时间片轮转调度算法(RR)

- 按照先来先服务的原则把进程排序好
- 每次从对列头部取出一个执行进程,分配一个时间片执行
- 是相对公平的算法,但是不能够保证给及时的响应给用户

<hr/>

## 二.死锁

死锁是指两个或两个以上的进程在执行过程中，由于竞争资源或者由于彼此通信而造成的一种阻塞的现象，若无外力作用，它们都将无法推进下去。此时称系统处于死锁状态或系统产生了死锁，这些永远在互相等待的进程称为死锁进程。

![image-20210330132022078](https://gitee.com/cao_ziqiang/img/raw/master/zwvl6YMqeQOotpI.png)

### 死锁的产生

#### 竞争资源

- 共享资源的数量不满足各个进程的需求
- 各个进程发生了资源竞争就导致了死锁

![image-20210330132316288](https://gitee.com/cao_ziqiang/img/raw/master/image-20210330132316288.png)

#### 进程的调度顺序不当

![image-20210330132906363](https://gitee.com/cao_ziqiang/img/raw/master/image-20210330132906363.png)

### 死锁的必要条件

#### 互斥条件

- 进程对于资源的使用是排他性的使用;

- 某资源只能被一个进程使用,其他进程若想使用,必须等待;

#### 请求保持条件

- 进程至少保持了一个资源,并且又提出了新的请求;

- 新资源被占用,请求被阻塞;

- 被阻塞的进程又没有释放自己保持的资源;

#### 不可剥夺条件

- 进程获得的资源未被使用完前不能被剥夺;

- 获得的资源只能由进程自身来释放;

#### 环路等待条件

- 发生死锁时,必然存在着进程---资源环形链
- 

![image-20210330133322841](https://gitee.com/cao_ziqiang/img/raw/master/image-20210330133322841.png)





### 死锁的处理

#### 预防死锁的方法

由于上文提到死锁产生必须有以上4个必要条件,所以我们可以通过来破败这4个条件中某一个来预防死锁的发生

##### 破坏请求保持条件

- 系统来规定进程运行之前,一次性地申请所有需要的资源;
- 进程在运行期间就不会提出新的资源请求,从而摒弃了请求保持条件;

##### 破环不可剥夺条件

- 当一个进程请求新的资源得不到满足的时候,必须先释放掉所有的资源;
- 进程运行时占有的资源可以释放,意味着可以被剥夺;

##### 破坏环路等待条件

- 可用资源线性排序,申请必须按照需要递增申请;
- 线性申请不再形成了环路,从而摒弃了环路等待条件;
- ![image-20210330134030304](https://gitee.com/cao_ziqiang/img/raw/master/image-20210330134030304.png)

#### 银行家算法

是一个可操作的著名的避免死锁发生的算法

以银行借贷系统分配策略为基础的算法

<hr/>

**基础策略**

- 客户申请的贷款是有限的,每次申请都需要声明最大资金量
- 银行家在能够满足贷款时,都应该给用户贷款;
- 客户在使用完贷款后,能够及时的归还贷款;

<hr/>

**算法的数据结构**

已分配资源表

![image-20210330134608226](https://gitee.com/cao_ziqiang/img/raw/master/image-20210330134608226.png)

![image-20210330135319536](https://gitee.com/cao_ziqiang/img/raw/master/image-20210330135319536.png)

![image-20210330135308469](https://gitee.com/cao_ziqiang/img/raw/master/image-20210330135308469.png)

先根据所需资源表减去已分配资源表得到还需分配资源表

![image-20210330135511644](https://gitee.com/cao_ziqiang/img/raw/master/image-20210330135511644.png)

将还需分配资源表和可分配资源表做对比

扫描一遍还需分配资源表,先将所有资源给能够执行的进程

![image-20210330135740791](https://gitee.com/cao_ziqiang/img/raw/master/image-20210330135740791.png)

